<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
    <head>
        <meta charset="utf-8" />
        <meta name="generator" content="markdown-it" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
        <meta name="author" content="runner" />
        <meta name="dcterms.date" content="2025-04-08 13:38:19.722" />
        <title>usermod</title>
        <style type="text/css">
            code {
                white-space: pre-wrap;
            }
            span.smallcaps {
                font-variant: small-caps;
            }
            span.underline {
                text-decoration: underline;
            }
            div.column {
                display: inline-block;
                vertical-align: top;
                width: 50%;
            }
        </style>
        <style type="text/css">
            a.sourceLine {
                display: inline-block;
                line-height: 1.25;
            }
            a.sourceLine {
                pointer-events: none;
                color: inherit;
                text-decoration: inherit;
            }
            a.sourceLine:empty {
                height: 1.2em;
            }
            .sourceCode {
                overflow: visible;
            }
            code.sourceCode {
                white-space: pre;
                position: relative;
            }
            div.sourceCode {
                margin: 1em 0;
            }
            pre.sourceCode {
                margin: 0;
            }
            @media screen {
                div.sourceCode {
                    overflow: auto;
                }
            }
            @media print {
                code.sourceCode {
                    white-space: pre-wrap;
                }
                a.sourceLine {
                    text-indent: -1em;
                    padding-left: 1em;
                }
            }
            pre.numberSource a.sourceLine {
                position: relative;
                left: -4em;
            }
            pre.numberSource a.sourceLine::before {
                content: attr(title);
                position: relative;
                left: -1em;
                text-align: right;
                vertical-align: baseline;
                border: none;
                pointer-events: all;
                display: inline-block;
                -webkit-touch-callout: none;
                -webkit-user-select: none;
                -khtml-user-select: none;
                -moz-user-select: none;
                -ms-user-select: none;
                user-select: none;
                padding: 0 4px;
                width: 4em;
                background-color: #ffffff;
                color: #a0a0a0;
            }
            pre.numberSource {
                margin-left: 3em;
                border-left: 1px solid #a0a0a0;
                padding-left: 4px;
            }
            div.sourceCode {
                color: #1f1c1b;
                background-color: #ffffff;
            }
            @media screen {
                a.sourceLine::before {
                    text-decoration: underline;
                }
            }
            code span {
                color: #1f1c1b;
            } /* Normal */
            code span.al {
                color: #bf0303;
                background-color: #f7e6e6;
                font-weight: bold;
            } /* Alert */
            code span.an {
                color: #ca60ca;
            } /* Annotation */
            code span.at {
                color: #0057ae;
            } /* Attribute */
            code span.bn {
                color: #b08000;
            } /* BaseN */
            code span.bu {
                color: #644a9b;
                font-weight: bold;
            } /* BuiltIn */
            code span.cf {
                color: #1f1c1b;
                font-weight: bold;
            } /* ControlFlow */
            code span.ch {
                color: #924c9d;
            } /* Char */
            code span.cn {
                color: #aa5500;
            } /* Constant */
            code span.co {
                color: #898887;
            } /* Comment */
            code span.cv {
                color: #0095ff;
            } /* CommentVar */
            code span.do {
                color: #607880;
            } /* Documentation */
            code span.dt {
                color: #0057ae;
            } /* DataType */
            code span.dv {
                color: #b08000;
            } /* DecVal */
            code span.er {
                color: #bf0303;
                text-decoration: underline;
            } /* Error */
            code span.ex {
                color: #0095ff;
                font-weight: bold;
            } /* Extension */
            code span.fl {
                color: #b08000;
            } /* Float */
            code span.fu {
                color: #644a9b;
            } /* Function */
            code span.im {
                color: #ff5500;
            } /* Import */
            code span.in {
                color: #b08000;
            } /* Information */
            code span.kw {
                color: #1f1c1b;
                font-weight: bold;
            } /* Keyword */
            code span.op {
                color: #1f1c1b;
            } /* Operator */
            code span.ot {
                color: #006e28;
            } /* Other */
            code span.pp {
                color: #006e28;
            } /* Preprocessor */
            code span.re {
                color: #0057ae;
                background-color: #e0e9f8;
            } /* RegionMarker */
            code span.sc {
                color: #3daee9;
            } /* SpecialChar */
            code span.ss {
                color: #ff5500;
            } /* SpecialString */
            code span.st {
                color: #bf0303;
            } /* String */
            code span.va {
                color: #0057ae;
            } /* Variable */
            code span.vs {
                color: #bf0303;
            } /* VerbatimString */
            code span.wa {
                color: #bf0303;
            } /* Warning */
        </style>
        <!--
  Firefox non carica font da locale quindi il font puÃ² non essere visibile
  quando di carica la pagina da locale.
  Bisogna impostare about:config
    security.fileuri.strict_origin_policy = false
  -->
        <link rel="stylesheet" href="../../inc/css/katex.min.css" />
        <link rel="stylesheet" href="../../inc/css/fonts/google_fonts.css" />
        <!-- <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-GLhlTQ8iRABdZLl6O3oVMWSktQOp6b7In1Zl3/Jr59b6EGGoI1aFkw7cmDA6j6gD" crossorigin="anonymous"> -->
        <link rel="stylesheet" href="../../inc/css/bootstrap.min.css" />
        <link rel="stylesheet" href="../../inc/css/cdp.css" />
        <!--[if lt IE 9]>
            <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv-printshiv.min.js"></script>
        <![endif]-->
        <meta name="keywords" content="Appunti,Note" />
        <meta name="description" content="Appunti di runner" />
        <link rel="icon" type="image/x-icon" href="../../inc/img/favicon.ico" />
        <link rel="shortcut icon" type="image/x-icon" href="../../inc/img/favicon.ico" />

        <link rel="stylesheet" href="../../inc/js/hljs/styles/default.css" />
        <script src="../../inc/js/hljs/lib/highlight.js"></script>
        <script src="../../inc/js/bootstrap/bootstrap.bundle.min.js"></script>
        <!-- <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js" integrity="sha384-w76AqPfDkMBDXo30jS1Sgez6pr3x5MlQ1ZAGC+nuZB+EYdgRZgiwxhTBTkF7CXvN" crossorigin="anonymous"></script> -->
        <script>
            hljs.initHighlightingOnLoad();
        </script>
        <script type="module">
            import mermaid from '../../inc/js/mermaid/dist/mermaid.esm.min.mjs';
            // import mermaid from 'https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.esm.min.mjs';
            mermaid.initialize({ startOnLoad: true });
        </script>
    </head>
    <body></body>
</html>
<h1 id="usermod" tabindex="-1">usermod <a class="header-anchor" href="#usermod" aria-hidden="true">ðŸ”—</a></h1>
<p class="code">2025-04-08 13:38:19.722</p>
<nav class="table-of-contents"><ol></ol></nav><h1 id="usermod-1" tabindex="-1">usermod <a class="header-anchor" href="#usermod-1" aria-hidden="true">ðŸ”—</a></h1>
<ul>
<li>
<p><a href="https://man.archlinux.org/man/usermod.8">https://man.archlinux.org/man/usermod.8</a></p>
<pre><code>  -c, --comment COMMENT

  -d, --home HOME_DIR
      The user's new login directory.
      If the -m option is given, the contents of the current home directory will be moved to the new home directory, which is created if it does not already exist.

  -m, --move-home
      moves the content of the user's home directory to the new location. If the current home directory does not exist the new home directory will not be created.
      This option is only valid in combination with the -d (or --home) option.    

  -e, --expiredate EXPIRE_DATE
      The date on which the user account will be disabled. The date is specified in the format YYYY-MM-DD. Integers as input are interpreted as days after 1970-01-01.
      An input of -1 or an empty string will blank the account expiration field in the shadow password file. The account will remain available with no date limit.

  -a, --append
      Add the user to the supplementary group(s). Use only with the -G option.

  -G, --groups GROUP1[,GROUP2,...[,GROUPN]]]
      A list of supplementary groups which the user is also a member of. Each group is separated from the next by a comma, with no intervening whitespace. The groups must exist. 

  -r, --remove
      Remove the user from named supplementary group(s). Use only with the -G option.

  -l, --login NEW_LOGIN
  
  -s, --shell SHELL changes the user's login shell.
</code></pre>
</li>
</ul>
<pre><code class="language-bash">$ usermod --expiredate 1 (this <span class="hljs-built_in">set</span> the account<span class="hljs-string">&#x27;s expire date to Jan 2, 1970)
$ usermod -d /my/new/home -m username # cambio della home
$ usermod -s /bin/bash username       # cambio della shell
$ usermod -l newname oldname          # cambio della login
$ usermod -c &quot;Comment&quot; username       # aggiunta di un commento GECOS
$ usermod -aG additional_groups username # (replace additional_groups with a comma-separated list)
$ chage -d 0 username # To mark a user&#x27;</span>s password as expired, requiring them to create a new password the first time they <span class="hljs-built_in">log</span> <span class="hljs-keyword">in</span>
$ userdel -r username <span class="hljs-comment"># The -r option specifies that the user&#x27;s home directory should also be deleted. </span>




$ <span class="hljs-built_in">sudo</span> usermod -aG <span class="hljs-built_in">log</span> <span class="hljs-variable">$USER</span>
$ <span class="hljs-built_in">sudo</span> usermod -a -G disk <span class="hljs-variable">$USER</span> <span class="hljs-comment"># User should be in a disk group to access raw partitions(virtualbox)</span>
$ <span class="hljs-built_in">sudo</span> usermod -aG docker <span class="hljs-variable">$USER</span> <span class="hljs-comment"># Run Docker without root</span>
$ <span class="hljs-built_in">sudo</span> gpasswd -a <span class="hljs-variable">$USER</span> wheel   <span class="hljs-comment"># Per avere un utente amministratore</span>
$ <span class="hljs-built_in">sudo</span> gpasswd -a <span class="hljs-variable">$USER</span> storage <span class="hljs-comment"># (per far funzionare l&#x27;automount di una USB Stick da GNOME)</span>
$ <span class="hljs-built_in">sudo</span> gpasswd -a <span class="hljs-variable">$USER</span> sys

$ <span class="hljs-built_in">sudo</span> usermod -aG vboxusers,libvirt,docker,wheel testuser

$ gpasswd -a user group     <span class="hljs-comment"># permette di aggiungere l&#x27;utente ad un solo gruppo</span>
$ usermod -aG gruppo1,gruppo2,gruppo3 nomeutente <span class="hljs-comment"># permette di aggiungere l&#x27;utente a piu gruppi contemporaneamente</span>

<span class="hljs-comment"># Tre modi alternativi per aggiungere l&#x27;utente corrente al gruppo</span>
$ <span class="hljs-built_in">sudo</span> gpasswd -a <span class="hljs-variable">$USER</span> vboxsf
$ <span class="hljs-built_in">sudo</span> usermod -aG vboxsf <span class="hljs-variable">${USER}</span>
$ <span class="hljs-built_in">sudo</span> usermod -aG kvm <span class="hljs-variable">${USER}</span>
$ <span class="hljs-built_in">sudo</span> usermod -aG libvirt <span class="hljs-variable">${USER}</span>

$ <span class="hljs-built_in">sudo</span> usermod -aG 0 <span class="hljs-variable">$USER</span> <span class="hljs-comment"># aggiungo l&#x27;utente host al gruppo root</span>

</code></pre>
</body></html>