<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
    <head>
        <meta charset="utf-8" />
        <meta name="generator" content="markdown-it" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
        <meta name="author" content="runner" />
        <meta name="dcterms.date" content="2025-04-08 13:38:20.152" />
        <title>comandi_utili</title>
        <style type="text/css">
            code {
                white-space: pre-wrap;
            }
            span.smallcaps {
                font-variant: small-caps;
            }
            span.underline {
                text-decoration: underline;
            }
            div.column {
                display: inline-block;
                vertical-align: top;
                width: 50%;
            }
        </style>
        <style type="text/css">
            a.sourceLine {
                display: inline-block;
                line-height: 1.25;
            }
            a.sourceLine {
                pointer-events: none;
                color: inherit;
                text-decoration: inherit;
            }
            a.sourceLine:empty {
                height: 1.2em;
            }
            .sourceCode {
                overflow: visible;
            }
            code.sourceCode {
                white-space: pre;
                position: relative;
            }
            div.sourceCode {
                margin: 1em 0;
            }
            pre.sourceCode {
                margin: 0;
            }
            @media screen {
                div.sourceCode {
                    overflow: auto;
                }
            }
            @media print {
                code.sourceCode {
                    white-space: pre-wrap;
                }
                a.sourceLine {
                    text-indent: -1em;
                    padding-left: 1em;
                }
            }
            pre.numberSource a.sourceLine {
                position: relative;
                left: -4em;
            }
            pre.numberSource a.sourceLine::before {
                content: attr(title);
                position: relative;
                left: -1em;
                text-align: right;
                vertical-align: baseline;
                border: none;
                pointer-events: all;
                display: inline-block;
                -webkit-touch-callout: none;
                -webkit-user-select: none;
                -khtml-user-select: none;
                -moz-user-select: none;
                -ms-user-select: none;
                user-select: none;
                padding: 0 4px;
                width: 4em;
                background-color: #ffffff;
                color: #a0a0a0;
            }
            pre.numberSource {
                margin-left: 3em;
                border-left: 1px solid #a0a0a0;
                padding-left: 4px;
            }
            div.sourceCode {
                color: #1f1c1b;
                background-color: #ffffff;
            }
            @media screen {
                a.sourceLine::before {
                    text-decoration: underline;
                }
            }
            code span {
                color: #1f1c1b;
            } /* Normal */
            code span.al {
                color: #bf0303;
                background-color: #f7e6e6;
                font-weight: bold;
            } /* Alert */
            code span.an {
                color: #ca60ca;
            } /* Annotation */
            code span.at {
                color: #0057ae;
            } /* Attribute */
            code span.bn {
                color: #b08000;
            } /* BaseN */
            code span.bu {
                color: #644a9b;
                font-weight: bold;
            } /* BuiltIn */
            code span.cf {
                color: #1f1c1b;
                font-weight: bold;
            } /* ControlFlow */
            code span.ch {
                color: #924c9d;
            } /* Char */
            code span.cn {
                color: #aa5500;
            } /* Constant */
            code span.co {
                color: #898887;
            } /* Comment */
            code span.cv {
                color: #0095ff;
            } /* CommentVar */
            code span.do {
                color: #607880;
            } /* Documentation */
            code span.dt {
                color: #0057ae;
            } /* DataType */
            code span.dv {
                color: #b08000;
            } /* DecVal */
            code span.er {
                color: #bf0303;
                text-decoration: underline;
            } /* Error */
            code span.ex {
                color: #0095ff;
                font-weight: bold;
            } /* Extension */
            code span.fl {
                color: #b08000;
            } /* Float */
            code span.fu {
                color: #644a9b;
            } /* Function */
            code span.im {
                color: #ff5500;
            } /* Import */
            code span.in {
                color: #b08000;
            } /* Information */
            code span.kw {
                color: #1f1c1b;
                font-weight: bold;
            } /* Keyword */
            code span.op {
                color: #1f1c1b;
            } /* Operator */
            code span.ot {
                color: #006e28;
            } /* Other */
            code span.pp {
                color: #006e28;
            } /* Preprocessor */
            code span.re {
                color: #0057ae;
                background-color: #e0e9f8;
            } /* RegionMarker */
            code span.sc {
                color: #3daee9;
            } /* SpecialChar */
            code span.ss {
                color: #ff5500;
            } /* SpecialString */
            code span.st {
                color: #bf0303;
            } /* String */
            code span.va {
                color: #0057ae;
            } /* Variable */
            code span.vs {
                color: #bf0303;
            } /* VerbatimString */
            code span.wa {
                color: #bf0303;
            } /* Warning */
        </style>
        <!--
  Firefox non carica font da locale quindi il font può non essere visibile
  quando di carica la pagina da locale.
  Bisogna impostare about:config
    security.fileuri.strict_origin_policy = false
  -->
        <link rel="stylesheet" href="../../inc/css/katex.min.css" />
        <link rel="stylesheet" href="../../inc/css/fonts/google_fonts.css" />
        <!-- <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-GLhlTQ8iRABdZLl6O3oVMWSktQOp6b7In1Zl3/Jr59b6EGGoI1aFkw7cmDA6j6gD" crossorigin="anonymous"> -->
        <link rel="stylesheet" href="../../inc/css/bootstrap.min.css" />
        <link rel="stylesheet" href="../../inc/css/cdp.css" />
        <!--[if lt IE 9]>
            <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv-printshiv.min.js"></script>
        <![endif]-->
        <meta name="keywords" content="Appunti,Note" />
        <meta name="description" content="Appunti di runner" />
        <link rel="icon" type="image/x-icon" href="../../inc/img/favicon.ico" />
        <link rel="shortcut icon" type="image/x-icon" href="../../inc/img/favicon.ico" />

        <link rel="stylesheet" href="../../inc/js/hljs/styles/default.css" />
        <script src="../../inc/js/hljs/lib/highlight.js"></script>
        <script src="../../inc/js/bootstrap/bootstrap.bundle.min.js"></script>
        <!-- <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js" integrity="sha384-w76AqPfDkMBDXo30jS1Sgez6pr3x5MlQ1ZAGC+nuZB+EYdgRZgiwxhTBTkF7CXvN" crossorigin="anonymous"></script> -->
        <script>
            hljs.initHighlightingOnLoad();
        </script>
        <script type="module">
            import mermaid from '../../inc/js/mermaid/dist/mermaid.esm.min.mjs';
            // import mermaid from 'https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.esm.min.mjs';
            mermaid.initialize({ startOnLoad: true });
        </script>
    </head>
    <body></body>
</html>
<h1 id="comandi_utili" tabindex="-1">comandi_utili <a class="header-anchor" href="#comandi_utili" aria-hidden="true">🔗</a></h1>
<p class="code">2025-04-08 13:38:20.152</p>
<nav class="table-of-contents"><ol><li><a href="#aprire-un-file-html-nel-browser">Aprire un file html nel browser </a></li><li><a href="#data-iso">data ISO </a></li><li><a href="#resize-di-immagini">Resize di immagini </a></li><li><a href="#search-and-replace-in-files">Search and Replace in files </a></li><li><a href="#cifrare%2Fdecifrare-files">Cifrare/Decifrare Files </a></li><li><a href="#informazioni-sui-filesystem">Informazioni sui filesystem </a></li><li><a href="#cancellazione-di-directory">Cancellazione di directory </a></li><li><a href="#ls-ordinato">ls ordinato </a></li><li><a href="#shell---iterare-una-directory-compresi-i-file%2Fdirectory-che-iniziano-con-un-punto">Shell - Iterare una directory compresi i file/directory che iniziano con un punto </a></li><li><a href="#sincronizzazione">Sincronizzazione </a></li><li><a href="#comparazione-tra-directory">Comparazione tra directory </a><ol><li><a href="#copia-di-un-file-di-grandi-dimensioni-con-visualizzazione-del-progresso">Copia di un file di grandi dimensioni con visualizzazione del progresso </a></li><li><a href="#sincronizzazione-directory-con-report">Sincronizzazione directory con report </a></li></ol></li><li><a href="#file-di-testo">File di testo </a><ol><li><a href="#search-and-replace-in-un-file">Search and Replace in un file </a></li><li><a href="#creare-un-file-di-testo-con-cat(heredoc)">Creare un file di testo con cat(heredoc) </a></li><li><a href="#spostare-i-soli-file-che-non-contengono-una-stringa">Spostare i soli file che non contengono una stringa </a></li><li><a href="#creare-un-file-da-script">Creare un file da script </a></li><li><a href="#conversione-encoding-sorgenti-in-msdos">Conversione Encoding Sorgenti in MSDOS </a></li><li><a href="#cercare-file-msdos-con-crlf">Cercare file MSDOS con CRLF </a></li><li><a href="#eliminare-i-cr-dai-file-dos-con-sed">Eliminare i CR dai file DOS con SED </a></li></ol></li><li><a href="#estrarre-file-p7m">Estrarre file p7m </a></li><li><a href="#iterare-una-directory-compresi-i-file%2Fdirectory-che-iniziano-con-un-punto">Iterare una directory compresi i file/directory che iniziano con un punto </a></li><li><a href="#search-and-delete-broken-symbolic-links">Search and delete Broken Symbolic Links </a></li><li><a href="#per-cercare-i-file-modificati-negli-ultimi-n-minuti">Per cercare i file modificati negli ultimi n minuti </a></li><li><a href="#ricerca-di-file-di-un-certo-tipo-contenenti-una-stringa">Ricerca di file di un certo tipo contenenti una stringa </a></li><li><a href="#montare-una-pendrive-usb">Montare una pendrive USB </a></li><li><a href="#aprire-nautilus-come-utente-root">Aprire Nautilus come utente root </a></li><li><a href="#creare-un-file">Creare un file </a></li></ol></nav><h1 id="comandi-utili" tabindex="-1">Comandi Utili <a class="header-anchor" href="#comandi-utili" aria-hidden="true">🔗</a></h1>
<ul>
<li><a href="https://manpages.org/">https://manpages.org/</a></li>
<li><a href="https://man.archlinux.org/">https://man.archlinux.org/</a></li>
<li><a href="https://explainshell.com/">https://explainshell.com/</a></li>
<li><a href="https://gchq.github.io/CyberChef/">https://gchq.github.io/CyberChef/</a></li>
<li><a href="https://regex101.com/">https://regex101.com/</a></li>
<li><a href="https://extendsclass.com/regex-tester.html">https://extendsclass.com/regex-tester.html</a></li>
<li><a href="https://regexper.com/">https://regexper.com/</a></li>
<li><a href="https://regexr.com/">https://regexr.com/</a></li>
<li><a href="https://cheatography.com/davechild/cheat-sheets/regular-expressions/">https://cheatography.com/davechild/cheat-sheets/regular-expressions/</a></li>
<li><a href="https://jsonformatter.org/yaml-validator">https://jsonformatter.org/yaml-validator</a></li>
<li><a href="https://www.gnu.org/software/coreutils/manual/html_node/index.html">https://www.gnu.org/software/coreutils/manual/html_node/index.html</a></li>
<li><a href="backup/compressione.html">Compressione</a></li>
</ul>
<h2 id="aprire-un-file-html-nel-browser" tabindex="-1">Aprire un file html nel browser <a class="header-anchor" href="#aprire-un-file-html-nel-browser" aria-hidden="true">🔗</a></h2>
<pre><code class="language-bash">$ xdg-open /usr/share/doc/git/html/user-manual.html
</code></pre>
<h2 id="data-iso" tabindex="-1">data ISO <a class="header-anchor" href="#data-iso" aria-hidden="true">🔗</a></h2>
<pre><code class="language-bash">$ <span class="hljs-built_in">date</span> -Iminutes
2023-03-25T07:29+01:00
</code></pre>
<h2 id="resize-di-immagini" tabindex="-1">Resize di immagini <a class="header-anchor" href="#resize-di-immagini" aria-hidden="true">🔗</a></h2>
<pre><code class="language-bash">$ convert -resize <span class="hljs-string">&#x27;470x140!&#x27;</span> logo-large.png logo-large_470x140.png
</code></pre>
<h2 id="search-and-replace-in-files" tabindex="-1">Search and Replace in files <a class="header-anchor" href="#search-and-replace-in-files" aria-hidden="true">🔗</a></h2>
<pre><code class="language-bash"><span class="hljs-comment"># Reimposta alla data corrente le linee contenenti __date__ nei file .py e .md</span>
DATE=$(<span class="hljs-built_in">date</span> -Iminutes)
grep -rlZIE --include=\*.{py,md}  <span class="hljs-string">&#x27;^__date__&#x27;</span> . | xargs -r0 sed -i -r <span class="hljs-string">&quot;/^__date__/c\__date__=&#x27;<span class="hljs-variable">$DATE</span>&#x27;&quot;</span>
</code></pre>
<h2 id="cifrare%2Fdecifrare-files" tabindex="-1">Cifrare/Decifrare Files <a class="header-anchor" href="#cifrare%2Fdecifrare-files" aria-hidden="true">🔗</a></h2>
<pre><code class="language-bash">$ <span class="hljs-built_in">export</span> PASS=..........

$ gpg -vv -c --cipher-algo AES256 --batch --<span class="hljs-built_in">yes</span> --passphrase <span class="hljs-variable">$PASS</span> code.txt
$ gpg -d --batch --passphrase <span class="hljs-variable">$PASS</span> -o code.txt code.txt.gpg

$ 7z a -p<span class="hljs-variable">$PASS</span> code.7z code.txt
$ 7z x -p<span class="hljs-variable">$PASS</span> code.7z

$ openssl enc -p -aes-256-cbc -pbkdf2 -k <span class="hljs-variable">$PASS</span> -<span class="hljs-keyword">in</span> code.txt -out code.enc
$ openssl enc -d -aes-256-cbc -pbkdf2 -k <span class="hljs-variable">$PASS</span> -<span class="hljs-keyword">in</span> code.enc -out code.txt
</code></pre>
<h2 id="informazioni-sui-filesystem" tabindex="-1">Informazioni sui filesystem <a class="header-anchor" href="#informazioni-sui-filesystem" aria-hidden="true">🔗</a></h2>
<pre><code class="language-bash">$ inxi -D
$ inxi -pl
$ <span class="hljs-built_in">sudo</span> fdisk -l
$ findmnt
$ lsblk -f
$ lsblk -S
$ <span class="hljs-built_in">df</span> -h
</code></pre>
<h2 id="cancellazione-di-directory" tabindex="-1">Cancellazione di directory <a class="header-anchor" href="#cancellazione-di-directory" aria-hidden="true">🔗</a></h2>
<pre><code>find 
   -prune if the file is a directory, do not descend into it.
   -print0 print the full file name on the standard output, followed by a null character (instead of the newline character that -print uses). This allows file names that contain newlines or other types of white space to be correctly interpreted by programs that process the find output.  This  option  corresponds to the -0 option of xargs.

xargs 
    -0, --null Input  items  are terminated by a null character instead of by whitespace, and the quotes and backslash are not special (every character is taken literal‐ly). Disables the end of file string, which is treated like any other argument.  Useful when input items might contain white space, quote marks, or back‐slashes. The GNU find -print0 option produces input suitable for this mode.
    -r, --no-run-if-empty If  the  standard input does not contain any nonblanks, do not run the command.  Normally, the command is run once even if there is no input.  This option is a GNU extension.
</code></pre>
<pre><code class="language-bash">$ find . -name <span class="hljs-string">&quot;node_modules&quot;</span> -<span class="hljs-built_in">type</span> d -prune -print0|xargs -r0 <span class="hljs-built_in">rm</span> -rf
</code></pre>
<h2 id="ls-ordinato" tabindex="-1">ls ordinato <a class="header-anchor" href="#ls-ordinato" aria-hidden="true">🔗</a></h2>
<pre><code class="language-bash">$ <span class="hljs-built_in">ls</span> -ltr --full-time <span class="hljs-comment"># ordina per data di modifica riportando per ultimo l&#x27;ultimo file modificato</span>
$ <span class="hljs-built_in">ls</span> -lt --full-time  <span class="hljs-comment"># ordina per data di modifica riportando per primo l&#x27;ultimo file modificato</span>
$ <span class="hljs-built_in">ls</span> -lSh             <span class="hljs-comment"># ordina riportando per primo il file più grande</span>
$ <span class="hljs-built_in">ls</span> -lShr            <span class="hljs-comment"># ordina riportando per ultimo il file più grande</span>
$ <span class="hljs-built_in">ls</span> -l --time-style=long-iso
</code></pre>
<h2 id="shell---iterare-una-directory-compresi-i-file%2Fdirectory-che-iniziano-con-un-punto" tabindex="-1">Shell - Iterare una directory compresi i file/directory che iniziano con un punto <a class="header-anchor" href="#shell---iterare-una-directory-compresi-i-file%2Fdirectory-che-iniziano-con-un-punto" aria-hidden="true">🔗</a></h2>
<pre><code class="language-bash">$ <span class="hljs-built_in">shopt</span> -s dotglob
$ <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> *; <span class="hljs-keyword">do</span> <span class="hljs-built_in">echo</span> <span class="hljs-variable">$i</span>; <span class="hljs-keyword">done</span>
$ <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> *; <span class="hljs-keyword">do</span> <span class="hljs-built_in">du</span> -sh <span class="hljs-variable">$i</span>; <span class="hljs-keyword">done</span>
</code></pre>
<h2 id="sincronizzazione" tabindex="-1">Sincronizzazione <a class="header-anchor" href="#sincronizzazione" aria-hidden="true">🔗</a></h2>
<h2 id="comparazione-tra-directory" tabindex="-1">Comparazione tra directory <a class="header-anchor" href="#comparazione-tra-directory" aria-hidden="true">🔗</a></h2>
<pre><code class="language-bash">$ diff -r -q cdp /media/truecrypt1/cdp
$ rsync -ani /media/Backup/ProgrammingDocs /media/ExternalBak/ |grep -v -E <span class="hljs-string">&#x27;^\.&#x27;</span>|<span class="hljs-built_in">sort</span>
$ meld cdp /media/truecrypt1/cdp
</code></pre>
<h3 id="copia-di-un-file-di-grandi-dimensioni-con-visualizzazione-del-progresso" tabindex="-1">Copia di un file di grandi dimensioni con visualizzazione del progresso <a class="header-anchor" href="#copia-di-un-file-di-grandi-dimensioni-con-visualizzazione-del-progresso" aria-hidden="true">🔗</a></h3>
<pre><code class="language-bash">$ rsync -av -P sda5/504.20.4.iso bitlocker/SEC504/
</code></pre>
<h3 id="sincronizzazione-directory-con-report" tabindex="-1">Sincronizzazione directory con report <a class="header-anchor" href="#sincronizzazione-directory-con-report" aria-hidden="true">🔗</a></h3>
<pre><code class="language-bash">$ rsync -i -a --del imgcd /media/CDP250GB/ |grep -v -E <span class="hljs-string">&#x27;^\.&#x27;</span>|<span class="hljs-built_in">sort</span>
</code></pre>
<pre><code>-a                      archive mode; equals -rlptgoD (no -H,-A,-X)
-r                      recurse into directories
-l                      copy symlinks as symlinks
-p                      preserve permissions
-t                      preserve modification times
-g                      preserve group
-o                      preserve owner (super-user only)
-D                      same as --devices --specials
--del                   an alias for --delete-during
--delete-during         receiver deletes during the transfer
-v                      increase verbosity
-P                      The -P option is equivalent to --partial --progress.
</code></pre>
<h2 id="file-di-testo" tabindex="-1">File di testo <a class="header-anchor" href="#file-di-testo" aria-hidden="true">🔗</a></h2>
<h3 id="search-and-replace-in-un-file" tabindex="-1">Search and Replace in un file <a class="header-anchor" href="#search-and-replace-in-un-file" aria-hidden="true">🔗</a></h3>
<p><a href="file_search_replace.html">Search &amp; Replace in files</a></p>
<pre><code class="language-bash"><span class="hljs-comment"># Reimposta alla data corrente le linee contenenti __date__ nei file .py e .md</span>
DATE=$(<span class="hljs-built_in">date</span> -Iminutes)
grep -rlZIE --include=\*.{py,md}  <span class="hljs-string">&#x27;^__date__&#x27;</span> . | xargs -r0 sed -i -r <span class="hljs-string">&quot;/^__date__/c\__date__=&#x27;<span class="hljs-variable">$DATE</span>&#x27;&quot;</span>

<span class="hljs-comment"># Rimozione di una password da tutti i file che la contengono</span>
$ grep -rlZE <span class="hljs-string">&#x27;xxxxxxxx&#x27;</span> . | xargs -r -0 sed -i -r <span class="hljs-string">&#x27;s/xxxxxxxx/password/g&#x27;</span>
$ grep -rlZIE --include=\*.{py,pl,sh}  <span class="hljs-string">&quot;old_string&quot;</span> . | xargs -r0 sed -ir <span class="hljs-string">&#x27;s/old_string/new_string/g&#x27;</span>
</code></pre>
<pre><code class="language-bash">$ <span class="hljs-built_in">cat</span> config.convert.txt | sed s/company_LOGGING=.*/company_LOGGING=\<span class="hljs-variable">$off</span>/g &gt; config.convert.tmp ; <span class="hljs-built_in">mv</span> config.convert.tmp config.convert.txt
</code></pre>
<h3 id="creare-un-file-di-testo-con-cat(heredoc)" tabindex="-1">Creare un file di testo con cat(heredoc) <a class="header-anchor" href="#creare-un-file-di-testo-con-cat(heredoc)" aria-hidden="true">🔗</a></h3>
<p><a href="../kernel/sysctl.html">sysctl</a></p>
<pre><code class="language-bash">$ <span class="hljs-built_in">sudo</span> bash -c <span class="hljs-string">&quot;cat &gt; /etc/sysctl.d/60-sysrq.conf&quot;</span> &lt;&lt; <span class="hljs-string">&#x27;EOF&#x27;</span>
kernel.sysrq = 1
EOF
</code></pre>
<pre><code class="language-bash">$ <span class="hljs-built_in">cat</span> &lt;&lt;<span class="hljs-string">&#x27;EOF&#x27;</span> &gt; ~/.local/share/applications/jetbrains-pycharm-ce.desktop
[Desktop Entry]
Version=1.0
Type=Application
Name=PyCharm Community Edition
Comment=Python IDE
TryExec=/home/<span class="hljs-variable">$USER</span>/app/pycharm-community-2021.1.1/bin/pycharm.sh
Exec=<span class="hljs-string">&quot;/home/<span class="hljs-variable">$USER</span>/app/pycharm-community-2021.1.1/bin/pycharm.sh&quot;</span> %f
Icon=/home/<span class="hljs-variable">$USER</span>/app/pycharm-community-2021.1.1/bin/pycharm.svg
Keywords=IDE;Python;PyCharm;
Encoding=UTF-8
NoDisplay=<span class="hljs-literal">false</span>
Categories=Development;IDE;TextEditor;
StartupWMClass=jetbrains-pycharm-ce
StartupNotify=<span class="hljs-literal">false</span>
Terminal=<span class="hljs-literal">false</span>
EOF
</code></pre>
<h3 id="spostare-i-soli-file-che-non-contengono-una-stringa" tabindex="-1">Spostare i soli file che non contengono una stringa <a class="header-anchor" href="#spostare-i-soli-file-che-non-contengono-una-stringa" aria-hidden="true">🔗</a></h3>
<p>Vogliamo spostare i soli file che non contengono <code>require('expect')</code>:</p>
<pre><code class="language-bash">$ grep -LZ <span class="hljs-string">&quot;require(&#x27;expect&#x27;)&quot;</span> * | xargs -I{} -0 <span class="hljs-built_in">mv</span> {} ../../../hello_world/
</code></pre>
<ul>
<li><code>grep -L</code> per ottenere in output i nomi dei file che non corrispondono alla stringa di ricerca</li>
<li><code>grep -Z</code> per utilizzare <code>\0</code> come separatore dei nomi dei file prodotti in output, utile per gestire file i cui nomi possono contenere <code>\n</code> o spazi</li>
<li><code>xargs -0</code> per ricevere una lista di elementi separati dal carattere <code>\0</code></li>
</ul>
<h3 id="creare-un-file-da-script" tabindex="-1">Creare un file da script <a class="header-anchor" href="#creare-un-file-da-script" aria-hidden="true">🔗</a></h3>
<pre><code class="language-bash">    <span class="hljs-built_in">sudo</span> <span class="hljs-built_in">tee</span> -a /etc/apt/sources.list.d/debian.list &lt;&lt;<span class="hljs-string">EOF
    deb http://deb.debian.org/debian/ stable main #Debian stable
    deb http://deb.debian.org/debian/ stable-updates main #Debian updates
    deb http://deb.debian.org/debian-security stable/updates main #Debian security updates
EOF</span>
</code></pre>
<h3 id="conversione-encoding-sorgenti-in-msdos" tabindex="-1">Conversione Encoding Sorgenti in MSDOS <a class="header-anchor" href="#conversione-encoding-sorgenti-in-msdos" aria-hidden="true">🔗</a></h3>
<pre><code class="language-bat">    <span class="hljs-keyword">for</span> /f %x <span class="hljs-keyword">in</span> (&#x27;<span class="hljs-built_in">dir</span> /b *.java&#x27;) <span class="hljs-keyword">do</span> recode ISO-<span class="hljs-number">8859</span>-<span class="hljs-number">1</span>..UTF-<span class="hljs-number">8</span> %x

    <span class="hljs-built_in">mkdir</span> new
    <span class="hljs-keyword">for</span> /f %x <span class="hljs-keyword">in</span> (&#x27;<span class="hljs-built_in">dir</span> /b *.java&#x27;) <span class="hljs-keyword">do</span> d:\app\Git\bin\iconv.exe -f ISO-<span class="hljs-number">8859</span>-<span class="hljs-number">1</span> -t UTF-<span class="hljs-number">8</span> %x &gt; new/%x
    <span class="hljs-built_in">move</span> new/*.* .
    <span class="hljs-built_in">rmdir</span> new
</code></pre>
<h3 id="cercare-file-msdos-con-crlf" tabindex="-1">Cercare file MSDOS con CRLF <a class="header-anchor" href="#cercare-file-msdos-con-crlf" aria-hidden="true">🔗</a></h3>
<pre><code class="language-bash">$ find . -not -<span class="hljs-built_in">type</span> d -print0 | xargs -0 dos2unix -ic
$ find . -not -<span class="hljs-built_in">type</span> d -name <span class="hljs-string">&#x27;*.py&#x27;</span> -print0 | xargs -0 dos2unix -ic
<span class="hljs-comment"># Conversione ricorsiva di tutti i file contenenti CRLF in file LF</span>
$ find . -not -<span class="hljs-built_in">type</span> d -print0 | xargs -0 dos2unix -ic0 | xargs -0 dos2unix
</code></pre>
<p>Utilizzando <span class="k">CTRL</span>+<span class="k">V</span> <span class="k">CTRL</span>+<span class="k">M</span> per produrreil <code>^M</code>:</p>
<pre><code class="language-bash">$ grep -lIUr --color <span class="hljs-string">&quot;^M&quot;</span> .
$ <span class="hljs-built_in">cat</span> -A file <span class="hljs-comment"># per vedere i newline</span>
</code></pre>
<ul>
<li><a href="../shell/eliminare_i_%5EM_newline.html">Visualizzare caratteri non stampabili</a></li>
</ul>
<h3 id="eliminare-i-cr-dai-file-dos-con-sed" tabindex="-1">Eliminare i CR dai file DOS con SED <a class="header-anchor" href="#eliminare-i-cr-dai-file-dos-con-sed" aria-hidden="true">🔗</a></h3>
<pre><code class="language-bash">$ sed <span class="hljs-string">&#x27;s/\x0D//g&#x27;</span> <span class="hljs-comment"># sed v1.5 only</span>
$ sed <span class="hljs-string">&#x27;s/^M$//&#x27;</span> <span class="hljs-comment"># in bash/tcsh, press Ctrl-V then Ctrl-M</span>
</code></pre>
<h2 id="estrarre-file-p7m" tabindex="-1">Estrarre file p7m <a class="header-anchor" href="#estrarre-file-p7m" aria-hidden="true">🔗</a></h2>
<ul>
<li><a href="https://dichiarazioneprecompilata.agenziaentrate.gov.it/FattureWeb/">https://dichiarazioneprecompilata.agenziaentrate.gov.it/FattureWeb/</a></li>
<li><a href="https://www.firma.infocert.it/installazione/">https://www.firma.infocert.it/installazione/</a></li>
<li><a href="https://rinnovofirma.infocert.it/download/x86_64/latest">https://rinnovofirma.infocert.it/download/x86_64/latest</a></li>
</ul>
<pre><code class="language-bash">$ openssl smime -verify -noverify -<span class="hljs-keyword">in</span> documento.pdf.p7m -inform DER -out documento.pdf
</code></pre>
<pre><code class="language-bash"><span class="hljs-meta">#!/usr/bin/env bash</span>

<span class="hljs-comment"># DIR=&quot;$( cd &quot;$( dirname &quot;${BASH_SOURCE[0]}&quot; )&quot; &gt;/dev/null 2&gt;&amp;1 &amp;&amp; pwd )&quot;</span>
<span class="hljs-comment"># cd $DIR</span>

<span class="hljs-keyword">if</span> [ <span class="hljs-variable">$#</span> -ne 1 ]
<span class="hljs-keyword">then</span>
    <span class="hljs-built_in">echo</span> indicare un file .p7m;
    <span class="hljs-built_in">exit</span> 1;
<span class="hljs-keyword">fi</span>

<span class="hljs-keyword">if</span> [ -z <span class="hljs-string">&quot;<span class="hljs-variable">$1</span>&quot;</span> ]
<span class="hljs-keyword">then</span>
    <span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;indicare un file .p7m&quot;</span>
    <span class="hljs-built_in">exit</span> 2;
<span class="hljs-keyword">fi</span>

<span class="hljs-keyword">if</span> [ ! <span class="hljs-variable">${file: -4}</span> == <span class="hljs-string">&quot;.p7m&quot;</span> ]
<span class="hljs-keyword">then</span>
    <span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;indicare un file .p7m&quot;</span>
    <span class="hljs-built_in">exit</span> 3;
<span class="hljs-keyword">fi</span>

<span class="hljs-keyword">if</span> [ ! -f <span class="hljs-string">&quot;<span class="hljs-variable">$1</span>&quot;</span> ] 
<span class="hljs-keyword">then</span>
    <span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;File <span class="hljs-variable">$1</span> non esistente&quot;</span>
    <span class="hljs-built_in">exit</span> 4
<span class="hljs-keyword">fi</span>

filename=<span class="hljs-variable">${1%.*}</span>

<span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;Input: <span class="hljs-variable">$1</span>&quot;</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;Output: <span class="hljs-variable">$filename</span>&quot;</span>

openssl smime -verify -noverify -<span class="hljs-keyword">in</span> <span class="hljs-string">&quot;<span class="hljs-variable">$1</span>&quot;</span> -inform DER -out <span class="hljs-string">&quot;<span class="hljs-variable">$filename</span>&quot;</span>
</code></pre>
<h2 id="iterare-una-directory-compresi-i-file%2Fdirectory-che-iniziano-con-un-punto" tabindex="-1">Iterare una directory compresi i file/directory che iniziano con un punto <a class="header-anchor" href="#iterare-una-directory-compresi-i-file%2Fdirectory-che-iniziano-con-un-punto" aria-hidden="true">🔗</a></h2>
<pre><code class="language-bash">$ <span class="hljs-built_in">shopt</span> -s dotglob
$ <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> *; <span class="hljs-keyword">do</span> <span class="hljs-built_in">echo</span> <span class="hljs-variable">$i</span>; <span class="hljs-keyword">done</span>
$ <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> *; <span class="hljs-keyword">do</span> <span class="hljs-built_in">du</span> -sh <span class="hljs-variable">$i</span>; <span class="hljs-keyword">done</span>
</code></pre>
<h2 id="search-and-delete-broken-symbolic-links" tabindex="-1">Search and delete Broken Symbolic Links <a class="header-anchor" href="#search-and-delete-broken-symbolic-links" aria-hidden="true">🔗</a></h2>
<pre><code class="language-bash">$ <span class="hljs-keyword">for</span> f <span class="hljs-keyword">in</span> $(find . -<span class="hljs-built_in">type</span> l); <span class="hljs-keyword">do</span> <span class="hljs-keyword">if</span> [ ! -e <span class="hljs-string">&quot;<span class="hljs-variable">$f</span>&quot;</span> ]; <span class="hljs-keyword">then</span> <span class="hljs-built_in">rm</span> <span class="hljs-string">&quot;<span class="hljs-variable">$f</span>&quot;</span>; <span class="hljs-keyword">fi</span>; <span class="hljs-keyword">done</span>
</code></pre>
<h2 id="per-cercare-i-file-modificati-negli-ultimi-n-minuti" tabindex="-1">Per cercare i file modificati negli ultimi n minuti <a class="header-anchor" href="#per-cercare-i-file-modificati-negli-ultimi-n-minuti" aria-hidden="true">🔗</a></h2>
<pre><code class="language-bash">$ find . -name <span class="hljs-string">&quot;*.yml&quot;</span> -mmin -$((<span class="hljs-number">5</span>*<span class="hljs-number">60</span>)) -<span class="hljs-built_in">ls</span> <span class="hljs-comment"># file modificati nelle ultime 5 ore</span>
$ find . -mmin -60 -<span class="hljs-built_in">exec</span> <span class="hljs-built_in">ls</span> -la {} \; <span class="hljs-comment"># file modificati negli ultimi 60 minuti</span>
$ find . -mmin -6# modified file<span class="hljs-string">&#x27;s data
$ find . -cmin -6	# modified file&#x27;</span>s status
</code></pre>
<h2 id="ricerca-di-file-di-un-certo-tipo-contenenti-una-stringa" tabindex="-1">Ricerca di file di un certo tipo contenenti una stringa <a class="header-anchor" href="#ricerca-di-file-di-un-certo-tipo-contenenti-una-stringa" aria-hidden="true">🔗</a></h2>
<pre><code class="language-bash">$ grep -r --include=<span class="hljs-string">&#x27;*.h&#x27;</span> <span class="hljs-string">&#x27;the string&#x27;</span> .
</code></pre>
<h2 id="montare-una-pendrive-usb" tabindex="-1">Montare una pendrive USB <a class="header-anchor" href="#montare-una-pendrive-usb" aria-hidden="true">🔗</a></h2>
<pre><code class="language-bash">$ <span class="hljs-built_in">sudo</span> mount -t vfat /dev/sdb1 /media/USB -o uid=1000,gid=1000,utf8,dmask=027,fmask=137
</code></pre>
<p>The options following the <code>-o</code> allow your user to have ownership of the drive, and the masks allow for extra security for file system permissions.
If you don’t use those extra options you may not be able to read and write the drive with your regular username.</p>
<h2 id="aprire-nautilus-come-utente-root" tabindex="-1">Aprire Nautilus come utente root <a class="header-anchor" href="#aprire-nautilus-come-utente-root" aria-hidden="true">🔗</a></h2>
<pre><code class="language-bash">$ xhost +<span class="hljs-built_in">local</span>: &amp;&amp; <span class="hljs-built_in">sudo</span> nautilus /usr/share/backgrounds/
</code></pre>
<h2 id="creare-un-file" tabindex="-1">Creare un file <a class="header-anchor" href="#creare-un-file" aria-hidden="true">🔗</a></h2>
<ol>
<li>Utilizzare <code>fallocate</code> (modo moderno).</li>
<li>Utilizzare <code>dd</code> con <code>seek</code> e non i modalità copia che è inutilmente inefficiente.</li>
</ol>
<pre><code class="language-bash">$ fallocate -l 1M testfile <span class="hljs-comment"># E&#x27; la maniera odierna di allocare spazio per un file</span>
$ xxd -a testfile

$ <span class="hljs-built_in">truncate</span> -s 1M testfile2
$ <span class="hljs-built_in">touch</span> testfile.txt

<span class="hljs-comment"># A scopo documentativo si mostra come si utilizzava dd, che copiando creava anche il file vuoto con lo spazio preallocato desiderato.</span>
<span class="hljs-comment"># Crea un file di 20MB (10240b = 10MB) - vecchia maniera inefficiente, non si fà così(non c&#x27;e&#x27; bisogno dell&#x27;operazione di copia)</span>
$ <span class="hljs-built_in">dd</span> conv=fsync <span class="hljs-keyword">if</span>=/dev/zero of=testfile bs=10M count=2
<span class="hljs-comment"># Crea un file di 1GB</span>
$ <span class="hljs-built_in">dd</span> conv=fsync <span class="hljs-keyword">if</span>=/dev/zero of=1g.bin bs=1G count=1

<span class="hljs-comment"># Al posto di count per iterare la copia, si deve utilizzare seek: skip=N skip N bs-sized blocks at start of input</span>
<span class="hljs-comment"># Crea un file di 1MB, 1024 blocchi(seek) di 1024b</span>
$ <span class="hljs-built_in">dd</span> <span class="hljs-keyword">if</span>=/dev/zero of=test.img bs=1024 count=0 seek=1024
<span class="hljs-comment"># Crea un file di 100MB</span>
$ <span class="hljs-built_in">dd</span> <span class="hljs-keyword">if</span>=/dev/zero of=test.img bs=1024 count=0 seek=$[1024*10]
<span class="hljs-comment"># Crea un file di 1GB</span>
$ <span class="hljs-built_in">dd</span> <span class="hljs-keyword">if</span>=/dev/zero of=1g.img bs=1 count=0 seek=1G 

$ <span class="hljs-built_in">stat</span> testfile
</code></pre>
</body></html>