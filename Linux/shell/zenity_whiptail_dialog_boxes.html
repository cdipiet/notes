<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
    <head>
        <meta charset="utf-8" />
        <meta name="generator" content="markdown-it" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
        <meta name="author" content="runner" />
        <meta name="dcterms.date" content="2025-04-08 13:44:53.225" />
        <title>zenity_whiptail_dialog_boxes</title>
        <style type="text/css">
            code {
                white-space: pre-wrap;
            }
            span.smallcaps {
                font-variant: small-caps;
            }
            span.underline {
                text-decoration: underline;
            }
            div.column {
                display: inline-block;
                vertical-align: top;
                width: 50%;
            }
        </style>
        <style type="text/css">
            a.sourceLine {
                display: inline-block;
                line-height: 1.25;
            }
            a.sourceLine {
                pointer-events: none;
                color: inherit;
                text-decoration: inherit;
            }
            a.sourceLine:empty {
                height: 1.2em;
            }
            .sourceCode {
                overflow: visible;
            }
            code.sourceCode {
                white-space: pre;
                position: relative;
            }
            div.sourceCode {
                margin: 1em 0;
            }
            pre.sourceCode {
                margin: 0;
            }
            @media screen {
                div.sourceCode {
                    overflow: auto;
                }
            }
            @media print {
                code.sourceCode {
                    white-space: pre-wrap;
                }
                a.sourceLine {
                    text-indent: -1em;
                    padding-left: 1em;
                }
            }
            pre.numberSource a.sourceLine {
                position: relative;
                left: -4em;
            }
            pre.numberSource a.sourceLine::before {
                content: attr(title);
                position: relative;
                left: -1em;
                text-align: right;
                vertical-align: baseline;
                border: none;
                pointer-events: all;
                display: inline-block;
                -webkit-touch-callout: none;
                -webkit-user-select: none;
                -khtml-user-select: none;
                -moz-user-select: none;
                -ms-user-select: none;
                user-select: none;
                padding: 0 4px;
                width: 4em;
                background-color: #ffffff;
                color: #a0a0a0;
            }
            pre.numberSource {
                margin-left: 3em;
                border-left: 1px solid #a0a0a0;
                padding-left: 4px;
            }
            div.sourceCode {
                color: #1f1c1b;
                background-color: #ffffff;
            }
            @media screen {
                a.sourceLine::before {
                    text-decoration: underline;
                }
            }
            code span {
                color: #1f1c1b;
            } /* Normal */
            code span.al {
                color: #bf0303;
                background-color: #f7e6e6;
                font-weight: bold;
            } /* Alert */
            code span.an {
                color: #ca60ca;
            } /* Annotation */
            code span.at {
                color: #0057ae;
            } /* Attribute */
            code span.bn {
                color: #b08000;
            } /* BaseN */
            code span.bu {
                color: #644a9b;
                font-weight: bold;
            } /* BuiltIn */
            code span.cf {
                color: #1f1c1b;
                font-weight: bold;
            } /* ControlFlow */
            code span.ch {
                color: #924c9d;
            } /* Char */
            code span.cn {
                color: #aa5500;
            } /* Constant */
            code span.co {
                color: #898887;
            } /* Comment */
            code span.cv {
                color: #0095ff;
            } /* CommentVar */
            code span.do {
                color: #607880;
            } /* Documentation */
            code span.dt {
                color: #0057ae;
            } /* DataType */
            code span.dv {
                color: #b08000;
            } /* DecVal */
            code span.er {
                color: #bf0303;
                text-decoration: underline;
            } /* Error */
            code span.ex {
                color: #0095ff;
                font-weight: bold;
            } /* Extension */
            code span.fl {
                color: #b08000;
            } /* Float */
            code span.fu {
                color: #644a9b;
            } /* Function */
            code span.im {
                color: #ff5500;
            } /* Import */
            code span.in {
                color: #b08000;
            } /* Information */
            code span.kw {
                color: #1f1c1b;
                font-weight: bold;
            } /* Keyword */
            code span.op {
                color: #1f1c1b;
            } /* Operator */
            code span.ot {
                color: #006e28;
            } /* Other */
            code span.pp {
                color: #006e28;
            } /* Preprocessor */
            code span.re {
                color: #0057ae;
                background-color: #e0e9f8;
            } /* RegionMarker */
            code span.sc {
                color: #3daee9;
            } /* SpecialChar */
            code span.ss {
                color: #ff5500;
            } /* SpecialString */
            code span.st {
                color: #bf0303;
            } /* String */
            code span.va {
                color: #0057ae;
            } /* Variable */
            code span.vs {
                color: #bf0303;
            } /* VerbatimString */
            code span.wa {
                color: #bf0303;
            } /* Warning */
        </style>
        <!--
  Firefox non carica font da locale quindi il font puÃ² non essere visibile
  quando di carica la pagina da locale.
  Bisogna impostare about:config
    security.fileuri.strict_origin_policy = false
  -->
        <link rel="stylesheet" href="../../inc/css/katex.min.css" />
        <link rel="stylesheet" href="../../inc/css/fonts/google_fonts.css" />
        <!-- <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-GLhlTQ8iRABdZLl6O3oVMWSktQOp6b7In1Zl3/Jr59b6EGGoI1aFkw7cmDA6j6gD" crossorigin="anonymous"> -->
        <link rel="stylesheet" href="../../inc/css/bootstrap.min.css" />
        <link rel="stylesheet" href="../../inc/css/cdp.css" />
        <!--[if lt IE 9]>
            <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv-printshiv.min.js"></script>
        <![endif]-->
        <meta name="keywords" content="Appunti,Note" />
        <meta name="description" content="Appunti di runner" />
        <link rel="icon" type="image/x-icon" href="../../inc/img/favicon.ico" />
        <link rel="shortcut icon" type="image/x-icon" href="../../inc/img/favicon.ico" />

        <link rel="stylesheet" href="../../inc/js/hljs/styles/default.css" />
        <script src="../../inc/js/hljs/lib/highlight.js"></script>
        <script src="../../inc/js/bootstrap/bootstrap.bundle.min.js"></script>
        <!-- <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js" integrity="sha384-w76AqPfDkMBDXo30jS1Sgez6pr3x5MlQ1ZAGC+nuZB+EYdgRZgiwxhTBTkF7CXvN" crossorigin="anonymous"></script> -->
        <script>
            hljs.initHighlightingOnLoad();
        </script>
        <script type="module">
            import mermaid from '../../inc/js/mermaid/dist/mermaid.esm.min.mjs';
            // import mermaid from 'https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.esm.min.mjs';
            mermaid.initialize({ startOnLoad: true });
        </script>
    </head>
    <body></body>
</html>
<h1 id="zenity_whiptail_dialog_boxes" tabindex="-1">zenity_whiptail_dialog_boxes <a class="header-anchor" href="#zenity_whiptail_dialog_boxes" aria-hidden="true">ðŸ”—</a></h1>
<p class="code">2025-04-08 13:44:53.225</p>
<nav class="table-of-contents"><ol><li><a href="#dialog">dialog </a></li><li><a href="#whiptail">whiptail </a><ol><li><a href="#le-redirezioni-3%3E%261-1%3E%262-2%3E%263-%3A-scambiare-stout-%3C--%3E-stderr">Le redirezioni 3&gt;&amp;1 1&gt;&amp;2 2&gt;&amp;3 : scambiare stout &lt;--&gt; stderr </a></li><li><a href="#utilizzare-whiptail-negli-script-shell-per-realizzare-dialoghi-di-input">Utilizzare whiptail negli script shell per realizzare dialoghi di input </a></li><li><a href="#widgets">Widgets </a><ol><li><a href="#info-box">Info box </a></li><li><a href="#message-box">Message box </a></li><li><a href="#yes%2Fno-box">Yes/no box </a></li><li><a href="#input-box">Input box </a></li><li><a href="#text-box">Text box </a></li><li><a href="#password-box">Password box </a></li><li><a href="#menus">Menus </a></li><li><a href="#check-list">Check list </a></li><li><a href="#radio-list">Radio list </a></li><li><a href="#progress-gauge">Progress gauge </a></li></ol></li></ol></li><li><a href="#zenity">zenity </a></li><li><a href="#pipe-viewer">Pipe Viewer </a></li></ol></nav><h1 id="dialog-box-negli-script-shell" tabindex="-1">Dialog Box negli script Shell <a class="header-anchor" href="#dialog-box-negli-script-shell" aria-hidden="true">ðŸ”—</a></h1>
<ul>
<li><a href="https://man.archlinux.org/man/dialog.1">https://man.archlinux.org/man/dialog.1</a></li>
<li><a href="https://man.archlinux.org/man/whiptail.1">https://man.archlinux.org/man/whiptail.1</a></li>
<li><a href="https://man.archlinux.org/man/zenity.1">https://man.archlinux.org/man/zenity.1</a></li>
</ul>
<h2 id="dialog" tabindex="-1">dialog <a class="header-anchor" href="#dialog" aria-hidden="true">ðŸ”—</a></h2>
<ul>
<li><a href="https://man.archlinux.org/man/dialog.1">https://man.archlinux.org/man/dialog.1</a></li>
<li><a href="https://www.geeksforgeeks.org/shell-scripting-dialog-boxes/">https://www.geeksforgeeks.org/shell-scripting-dialog-boxes/</a></li>
</ul>
<pre><code class="language-bash">$ pacman -S dialog
</code></pre>
<pre><code class="language-bash"><span class="hljs-meta">#!/bin/bash</span>
DIALOG=<span class="hljs-variable">${DIALOG=dialog}</span>

<span class="hljs-variable">$DIALOG</span> --title <span class="hljs-string">&quot; My first dialog&quot;</span> --clear \
        --yesno <span class="hljs-string">&quot;Hello , this is my first dialog program&quot;</span> 10 30

<span class="hljs-keyword">case</span> $? <span class="hljs-keyword">in</span>
  0)
    <span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;Yes chosen.&quot;</span>;;
  1)
    <span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;No chosen.&quot;</span>;;
  255)
    <span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;ESC pressed.&quot;</span>;;
<span class="hljs-keyword">esac</span>
</code></pre>
<pre><code class="language-bash"><span class="hljs-meta">#!/bin/bash </span>
<span class="hljs-keyword">function</span> <span class="hljs-function"><span class="hljs-title">DialogGen</span></span>() { 
dialog --title <span class="hljs-string">&quot;Hello&quot;</span> --msgbox <span class="hljs-string">&#x27;Hello GFG Users!&#x27;</span> 6 20 
dialog --checklist <span class="hljs-string">&#x27;checklist&#x27;</span> 15 10 10 <span class="hljs-string">&#x27;potato&#x27;</span>  5 <span class="hljs-string">&#x27;on&#x27;</span>  <span class="hljs-string">&#x27;carrot&#x27;</span> 2 <span class="hljs-string">&#x27;off&#x27;</span> <span class="hljs-string">&#x27;grape&#x27;</span> 3 <span class="hljs-string">&#x27;on&#x27;</span> <span class="hljs-string">&#x27;cabbage; 4 &#x27;</span>off<span class="hljs-string">&#x27; 
dialog --msgbox &quot;Hi geeks, hope everyone are enjoying GeeksForGeeks&quot; 10 30 
dialog --gauge &lt;text&gt; &lt;height&gt; &lt;width&gt; [&lt;percent&gt;] 
dialog --form &quot;please enter the required information&quot; 12 40 4 &quot;Name:&quot;  1 1 &quot;&quot; 1 12 15 0 \ &quot;Age:&quot;  2 1 &quot;&quot; 2 12 15 0 &quot;Mail id:&quot; 3 1 &quot;&quot; 3 12 15 0 
dialog --infobox &quot;Geeks, this is just a sample message&quot; 10 31 
dialog --inputbox &quot;geeks, please enter your name&quot; 10 31 &quot;enter here&quot;  
dialog --inputmenu &quot;Edit if required,&quot; 12 45 25 1 &quot;hi&quot; 2 &quot;good morning&quot; 3 &quot;Take&quot; &quot;Care&quot;
dialog--menu &quot;choose your favourite fruit&quot; 12 45 25 1 &quot;apple&quot; 2 &quot;banana&quot; 3 &quot;grapes&quot; 4 &quot;oranges&quot;
dialog --yesno &quot;Hey Geek, Do You Want To Continue With Current Session?&quot; 10 31 
dialog --passwordform &quot;Hey Geek, please enter required information:&quot; 12 40 4 &quot;password:&quot; 1 1 &quot;&quot; 1 12 15 0 &quot;otp:&quot; 2 1 &quot;&quot; 2 12 15 0 &quot;secret key:&quot; 3 1 &quot;&quot; 3 12 15 0 
dialog --radiolist &#x27;</span>radiolist<span class="hljs-string">&#x27; 15 10 10 &#x27;</span>Grapes<span class="hljs-string">&#x27; 5 &#x27;</span>off<span class="hljs-string">&#x27; &#x27;</span>apple<span class="hljs-string">&#x27; 2 &#x27;</span>off<span class="hljs-string">&#x27; &#x27;</span>dessert<span class="hljs-string">&#x27; 3 &#x27;</span>off<span class="hljs-string">&#x27; &#x27;</span>coffee<span class="hljs-string">&#x27; 4 &#x27;</span>on<span class="hljs-string">&#x27; 

}
DialogGen
</span></code></pre>
<h2 id="whiptail" tabindex="-1">whiptail <a class="header-anchor" href="#whiptail" aria-hidden="true">ðŸ”—</a></h2>
<p><a href="https://man.archlinux.org/man/whiptail.1">https://man.archlinux.org/man/whiptail.1</a>  display dialog boxes from shell scripts</p>
<p>Whiptail is a &quot;dialog&quot; replacement using newt instead of ncurses.</p>
<ul>
<li><a href="https://en.wikibooks.org/wiki/Bash_Shell_Scripting/Whiptail">https://en.wikibooks.org/wiki/Bash_Shell_Scripting/Whiptail</a></li>
<li><a href="https://saveriomiroddi.github.io/Shell-scripting-adventures-part-3/">https://saveriomiroddi.github.io/Shell-scripting-adventures-part-3/</a></li>
<li><a href="https://pagure.io/newt">https://pagure.io/newt</a></li>
</ul>
<pre><code class="language-bash">$ pacman -Qo whiptail
/usr/bin/whiptail Ã¨ contenuto <span class="hljs-keyword">in</span> libnewt 0.52.23-1
</code></pre>
<h3 id="le-redirezioni-3%3E%261-1%3E%262-2%3E%263-%3A-scambiare-stout-%3C--%3E-stderr" tabindex="-1">Le redirezioni 3&gt;&amp;1 1&gt;&amp;2 2&gt;&amp;3 : scambiare stout &lt;--&gt; stderr <a class="header-anchor" href="#le-redirezioni-3%3E%261-1%3E%262-2%3E%263-%3A-scambiare-stout-%3C--%3E-stderr" aria-hidden="true">ðŸ”—</a></h3>
<p>The formal expression of that is <code>3&gt;&amp;1 1&gt;&amp;2 2&gt;&amp;3</code> which means:</p>
<ul>
<li>we create a temporary file descriptor (<code>#3</code>) and point it to <code>stdout</code> (<code>1</code>)</li>
<li>we redirect <code>stdout</code> (<code>1</code>) to <code>stderr</code> (<code>2</code>)</li>
<li>we redirect <code>stderr</code> (<code>2</code>) to the temporary file descriptor (<code>3</code>), which points to <code>stdout</code> (due to the first step)</li>
</ul>
<p>Result: <strong><code>stdout</code> and <code>stderr</code> are switched</strong></p>
<p><a href="https://unix.stackexchange.com/questions/42728/what-does-31-12-23-do-in-a-script">https://unix.stackexchange.com/questions/42728/what-does-31-12-23-do-in-a-script</a></p>
<p>The numbers are file descriptors and only the first three (starting with zero) have a standardized meaning:</p>
<ul>
<li><code>0</code>: <code>stdin</code></li>
<li><code>1': </code>stdout`</li>
<li><code>2</code>: <code>stderr</code></li>
</ul>
<p>So each of these numbers in your command refer to a file descriptor.<br>
You can either redirect a file descriptor to a file with <code>&gt;</code><br>
or redirect it to another file descriptor with <code>&gt;&amp;</code></p>
<p>The <code>3&gt;&amp;1</code> in your command line will create a new file descriptor and redirect it to <code>1</code> which is <code>STDOUT</code>.<br>
Now <code>1&gt;&amp;2</code> will redirect the file descriptor <code>1</code> to <code>STDERR</code> and <code>2&gt;&amp;3</code> will redirect file descriptor <code>2</code> to <code>3</code> which is <code>STDOUT</code>.</p>
<p>So basically you switched <code>STDOUT</code> and <code>STDERR</code>, these are the steps:</p>
<ul>
<li>Create a new fd 3 and point it to the fd 1</li>
<li>Redirect file descriptor 1 to file descriptor 2. If we wouldn't have saved the file descriptor in 3 we would lose the target.</li>
<li>Redirect file descriptor 2 to file descriptor 3. Now file descriptors one and two are switched.</li>
</ul>
<p>Now if the program prints something to the file descriptor 1, it will be printed to the file descriptor 2 and vice versa.</p>
<h3 id="utilizzare-whiptail-negli-script-shell-per-realizzare-dialoghi-di-input" tabindex="-1">Utilizzare whiptail negli script shell per realizzare dialoghi di input <a class="header-anchor" href="#utilizzare-whiptail-negli-script-shell-per-realizzare-dialoghi-di-input" aria-hidden="true">ðŸ”—</a></h3>
<pre><code class="language-bash"><span class="hljs-meta">#!/usr/bin/env bash</span>
FILENAME=$(whiptail --inputbox <span class="hljs-string">&quot;Inserire il nome del file o della directory: &quot;</span> 8 78 --title <span class="hljs-string">&quot;Selezione file&quot;</span> 3&gt;&amp;1 1&gt;&amp;2 2&gt;&amp;3)
exitstatus=$?
<span class="hljs-keyword">if</span> [ <span class="hljs-variable">$exitstatus</span> != 0 ]
<span class="hljs-keyword">then</span>
    <span class="hljs-built_in">exit</span> 1 <span class="hljs-comment"># Interrotto dallâ€™utente</span>
<span class="hljs-keyword">fi</span>
RECURSIVE=<span class="hljs-string">&quot;&quot;</span>
<span class="hljs-keyword">if</span> [ -d <span class="hljs-variable">$FILENAME</span> ] <span class="hljs-comment"># User chose a directory</span>
<span class="hljs-keyword">then</span>
    <span class="hljs-keyword">if</span> (whiptail --title <span class="hljs-string">&quot;Applicare alla directory?&quot;</span> --yesno \
        <span class="hljs-string">&quot;Hai inserito il nome di una directory. Vuoi
        applicare le modifiche a tutti i file nella directory?&quot;</span> \
        8 78)
    <span class="hljs-keyword">then</span>
        <span class="hljs-built_in">echo</span> selezionata opzioni ricorsiva
        RECURSIVE=<span class="hljs-string">&quot;-R&quot;</span>
    <span class="hljs-keyword">fi</span>
<span class="hljs-keyword">fi</span>
MODES=$(whiptail --title <span class="hljs-string">&quot;Selezionare i permessi&quot;</span> \
        --checklist \
        <span class="hljs-string">&quot;scegliere i permessi&quot;</span> 10 78 4 \
        r Lettura ON \
        w Scrittura OFF \
        x Esecuzione OFF 3&gt;&amp;1 1&gt;&amp;2 2&gt;&amp;3 | <span class="hljs-built_in">tr</span> -d -c rwx )
exitstatus=$?
<span class="hljs-keyword">if</span> [ <span class="hljs-variable">$exitstatus</span> != 0 ]
<span class="hljs-keyword">then</span>
    <span class="hljs-built_in">exit</span> 1 <span class="hljs-comment"># Interrotto dallâ€™utente</span>
<span class="hljs-keyword">fi</span>
whiptail --title <span class="hljs-string">&quot;Conferma&quot;</span> --msgbox <span class="hljs-string">&quot;chmod <span class="hljs-variable">$RECURSIVE</span> u=<span class="hljs-variable">$MODES</span> <span class="hljs-variable">$FILENAME</span>&quot;</span> 8 78
</code></pre>
<h3 id="widgets" tabindex="-1">Widgets <a class="header-anchor" href="#widgets" aria-hidden="true">ðŸ”—</a></h3>
<h4 id="info-box" tabindex="-1">Info box <a class="header-anchor" href="#info-box" aria-hidden="true">ðŸ”—</a></h4>
<p>A simple type of dialog box in Whiptail is the info box. This shows a dialog box containing text to the user.</p>
<pre><code class="language-bash">whiptail --title <span class="hljs-string">&quot;Example Dialog&quot;</span> --infobox <span class="hljs-string">&quot;This is an example of an info box.&quot;</span> 8 78
</code></pre>
<p>In the example above, the value of <code>--title</code> is displayed at the top of the dialog box. The first argument to <code>--infobox</code> is the dialog box text which is shown beneath the title. The next two arguments specify the <code>height</code> and <code>width</code> of the dialog box. The width is set to 78 as most terminals will be at least 80 columns or more.</p>
<p><strong>There is a bug that makes the Info Box not display on some shells.</strong> If this is the case you can set the terminal emulation to something different and it will work.</p>
<pre><code class="language-bash">TERM=ansi whiptail --title <span class="hljs-string">&quot;Example Dialog&quot;</span> --infobox <span class="hljs-string">&quot;This is an example of an info box&quot;</span> 8 78
</code></pre>
<h4 id="message-box" tabindex="-1">Message box <a class="header-anchor" href="#message-box" aria-hidden="true">ðŸ”—</a></h4>
<p>A message box is very similar to an info box, except that it waits for the user to hit the OK button. Usage is similar to the info box:</p>
<pre><code class="language-bash">whiptail --title <span class="hljs-string">&quot;Example Dialog&quot;</span> --msgbox <span class="hljs-string">&quot;This is an example of a message box. You must hit OK to continue.&quot;</span> 8 78
</code></pre>
<h4 id="yes%2Fno-box" tabindex="-1">Yes/no box <a class="header-anchor" href="#yes%2Fno-box" aria-hidden="true">ðŸ”—</a></h4>
<p>The simplest way to get input from the user is via a Yes/no box. This displays a dialog with two buttons labelled Yes and No.</p>
<pre><code class="language-bash"><span class="hljs-comment"># If you cannot understand this, read Bash_Shell_Scripting#if_statements again.</span>
<span class="hljs-keyword">if</span> (whiptail --title <span class="hljs-string">&quot;Example Dialog&quot;</span> --yesno <span class="hljs-string">&quot;This is an example of a yes/no box.&quot;</span> 8 78); <span class="hljs-keyword">then</span>
    <span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;User selected Yes, exit status was $?.&quot;</span>
<span class="hljs-keyword">else</span>
    <span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;User selected No, exit status was $?.&quot;</span>
<span class="hljs-keyword">fi</span>
</code></pre>
<h4 id="input-box" tabindex="-1">Input box <a class="header-anchor" href="#input-box" aria-hidden="true">ðŸ”—</a></h4>
<p>A way to get free-form input from the user is via an input box. This displays a dialog with two buttons labelled Ok and Cancel.</p>
<pre><code class="language-bash">COLOR=$(whiptail --inputbox <span class="hljs-string">&quot;What is your favorite Color?&quot;</span> 8 39 Blue --title <span class="hljs-string">&quot;Example Dialog&quot;</span> 3&gt;&amp;1 1&gt;&amp;2 2&gt;&amp;3)
                                                                        <span class="hljs-comment"># A trick to swap stdout and stderr.</span>
<span class="hljs-comment"># Again, you can pack this inside if, but it seems really long for some 80-col terminal users.</span>
exitstatus=$?
<span class="hljs-keyword">if</span> [ <span class="hljs-variable">$exitstatus</span> = 0 ]; <span class="hljs-keyword">then</span>
    <span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;User selected Ok and entered &quot;</span> <span class="hljs-variable">$COLOR</span>
<span class="hljs-keyword">else</span>
    <span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;User selected Cancel.&quot;</span>
<span class="hljs-keyword">fi</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;(Exit status was <span class="hljs-variable">$exitstatus</span>)&quot;</span>
</code></pre>
<h4 id="text-box" tabindex="-1">Text box <a class="header-anchor" href="#text-box" aria-hidden="true">ðŸ”—</a></h4>
<p>A text box with contents of the given file inside. Add --scrolltext if the file is longer than the window.</p>
<pre><code class="language-bash"><span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;Welcome to Bash <span class="hljs-variable">$BASH_VERSION</span>&quot;</span> &gt; test_textbox
<span class="hljs-comment">#                  filename height width</span>
whiptail --textbox test_textbox 12 80
</code></pre>
<h4 id="password-box" tabindex="-1">Password box <a class="header-anchor" href="#password-box" aria-hidden="true">ðŸ”—</a></h4>
<p>A way to get a hidden password from the user is via an password box. This displays a dialog with two buttons labelled Ok and Cancel.</p>
<pre><code class="language-bash"><span class="hljs-meta">#!/usr/bin/env bash</span>
PASSWORD=$(whiptail --passwordbox <span class="hljs-string">&quot;please enter your secret password&quot;</span> 8 78 --title <span class="hljs-string">&quot;password dialog&quot;</span> 3&gt;&amp;1 1&gt;&amp;2 2&gt;&amp;3)
                                                                        <span class="hljs-comment"># A trick to swap stdout and stderr.</span>
<span class="hljs-comment"># Again, you can pack this inside if, but it seems really long for some 80-col terminal users.</span>
exitstatus=$?
<span class="hljs-keyword">if</span> [ <span class="hljs-variable">$exitstatus</span> = 0 ]; <span class="hljs-keyword">then</span>
    <span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;User selected Ok and entered &quot;</span> <span class="hljs-variable">$PASSWORD</span>
<span class="hljs-keyword">else</span>
    <span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;User selected Cancel.&quot;</span>
<span class="hljs-keyword">fi</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;(Exit status was <span class="hljs-variable">$exitstatus</span>)&quot;</span>
</code></pre>
<pre><code class="language-bash"><span class="hljs-meta">#!/usr/bin/env bash</span>
<span class="hljs-keyword">while</span> [[ <span class="hljs-string">&quot;<span class="hljs-variable">$passphrase</span>&quot;</span> != <span class="hljs-string">&quot;<span class="hljs-variable">$passphrase_repeat</span>&quot;</span> || <span class="hljs-variable">${#passphrase}</span> -lt 8 ]]; <span class="hljs-keyword">do</span>
  passphrase=$(whiptail --passwordbox <span class="hljs-string">&quot;<span class="hljs-variable">${passphrase_invalid_message}</span>Please enter the passphrase (8 chars min.):&quot;</span> 20 78 3&gt;&amp;1 1&gt;&amp;2 2&gt;&amp;3)
  passphrase_repeat=$(whiptail --passwordbox <span class="hljs-string">&quot;Please repeat the passphrase:&quot;</span> 20 78 3&gt;&amp;1 1&gt;&amp;2 2&gt;&amp;3)
  passphrase_invalid_message=<span class="hljs-string">&quot;Passphrase too short, or not matching! &quot;</span>
<span class="hljs-keyword">done</span>
</code></pre>
<h4 id="menus" tabindex="-1">Menus <a class="header-anchor" href="#menus" aria-hidden="true">ðŸ”—</a></h4>
<p>Whenever you want to present a list of options to the user, whiptail has several dialog types to choose from.</p>
<p>A menu should be used when you want the user to select one option from a list, such as for navigating a program.</p>
<pre><code class="language-bash">whiptail --title <span class="hljs-string">&quot;Menu example&quot;</span> --menu <span class="hljs-string">&quot;Choose an option&quot;</span> 25 78 16 \
<span class="hljs-string">&quot;&lt;-- Back&quot;</span> <span class="hljs-string">&quot;Return to the main menu.&quot;</span> \
<span class="hljs-string">&quot;Add User&quot;</span> <span class="hljs-string">&quot;Add a user to the system.&quot;</span> \
<span class="hljs-string">&quot;Modify User&quot;</span> <span class="hljs-string">&quot;Modify an existing user.&quot;</span> \
<span class="hljs-string">&quot;List Users&quot;</span> <span class="hljs-string">&quot;List all users on the system.&quot;</span> \
<span class="hljs-string">&quot;Add Group&quot;</span> <span class="hljs-string">&quot;Add a user group to the system.&quot;</span> \
<span class="hljs-string">&quot;Modify Group&quot;</span> <span class="hljs-string">&quot;Modify a group and its list of members.&quot;</span> \
<span class="hljs-string">&quot;List Groups&quot;</span> <span class="hljs-string">&quot;List all groups on the system.&quot;</span>
</code></pre>
<p>The values given to --menu are:</p>
<ul>
<li>The text describing the menu (&quot;Choose an option&quot;)</li>
<li>The height of the dialog (25)</li>
<li>The width of the dialog (78)</li>
<li>The height of the menu list (16)</li>
</ul>
<p>The rest of the values are a list of menu options in the format tag item, where tag is the name of the option which is printed to stderr when selected, and item is the description of the menu option.</p>
<p>If you are presenting a very long menu and want to make best use of the available screen, you can calculate the best box size by.</p>
<pre><code class="language-bash"><span class="hljs-built_in">eval</span> `resize`
whiptail ... <span class="hljs-variable">$LINES</span> <span class="hljs-variable">$COLUMNS</span> $(( <span class="hljs-variable">$LINES</span> - <span class="hljs-number">8</span> )) ...
</code></pre>
<h4 id="check-list" tabindex="-1">Check list <a class="header-anchor" href="#check-list" aria-hidden="true">ðŸ”—</a></h4>
<p>At some point, you will want to present options to the user which would not be appropriate to place in a menu.</p>
<p>A check list allows a user to select one or more options from a list.</p>
<pre><code class="language-bash">whiptail --title <span class="hljs-string">&quot;Check list example&quot;</span> --checklist \
<span class="hljs-string">&quot;Choose user&#x27;s permissions&quot;</span> 20 78 4 \
<span class="hljs-string">&quot;NET_OUTBOUND&quot;</span> <span class="hljs-string">&quot;Allow connections to other hosts&quot;</span> ON \
<span class="hljs-string">&quot;NET_INBOUND&quot;</span> <span class="hljs-string">&quot;Allow connections from other hosts&quot;</span> OFF \
<span class="hljs-string">&quot;LOCAL_MOUNT&quot;</span> <span class="hljs-string">&quot;Allow mounting of local devices&quot;</span> OFF \
<span class="hljs-string">&quot;REMOTE_MOUNT&quot;</span> <span class="hljs-string">&quot;Allow mounting of remote devices&quot;</span> OFF
</code></pre>
<p>When the user confirms their selections, a list of the choices is printed to stderr.</p>
<pre><code class="language-bash"><span class="hljs-meta">#!/usr/bin/env bash</span>
<span class="hljs-built_in">declare</span> -A usb_storage_devices=([/dev/sdb]=<span class="hljs-string">&quot;My USB Key&quot;</span> [/dev/sdc]=<span class="hljs-string">&quot;My external HDD&quot;</span>)
entry_options=()
entries_count=<span class="hljs-variable">${#usb_storage_devices[@]}</span>
message=$<span class="hljs-string">&#x27;Choose an external device. THE DEVICE WILL BE COMPLETELY ERASED.\n\nAvailable (USB) devices:\n\n&#x27;</span>
selected_device_names=()
<span class="hljs-keyword">for</span> dev <span class="hljs-keyword">in</span> <span class="hljs-string">&quot;<span class="hljs-variable">${!usb_storage_devices[@]}</span>&quot;</span>; <span class="hljs-keyword">do</span>
  entry_options+=(<span class="hljs-string">&quot;<span class="hljs-variable">$dev</span>&quot;</span>)
  entry_options+=(<span class="hljs-string">&quot;<span class="hljs-variable">${usb_storage_devices[$dev]}</span>&quot;</span>)
  entry_options+=(<span class="hljs-string">&quot;OFF&quot;</span>)
<span class="hljs-keyword">done</span>
selected_device_descriptions=$(whiptail --checklist --separate-output --title <span class="hljs-string">&quot;Device choice&quot;</span> <span class="hljs-string">&quot;<span class="hljs-variable">$message</span>&quot;</span> 20 78 <span class="hljs-variable">$entries_count</span> -- <span class="hljs-string">&quot;<span class="hljs-variable">${entry_options[@]}</span>&quot;</span> 3&gt;&amp;1 1&gt;&amp;2 2&gt;&amp;3)
<span class="hljs-built_in">mapfile</span> -t selected_device_names &lt;&lt;&lt; <span class="hljs-string">&quot;<span class="hljs-variable">$selected_device_descriptions</span>&quot;</span>
<span class="hljs-keyword">for</span> device_name <span class="hljs-keyword">in</span> <span class="hljs-string">&quot;<span class="hljs-variable">${selected_device_names[@]}</span>&quot;</span>; <span class="hljs-keyword">do</span>
  <span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;Device name: <span class="hljs-variable">$device_name</span>&quot;</span>
<span class="hljs-keyword">done</span>
</code></pre>
<p>By using the <code>--separate-output</code> options, Whiptail returns one line per selected entry, so that we easily parse the result.
For people not acquainted with Bash, the most notable concept is <code>mapfile</code> (sometimes used via the alias <code>readarray</code>):</p>
<ul>
<li>it reads a string ($selected_device_descriptions),</li>
<li>splits it via separator (default: <code>\n</code>),</li>
<li>removes the trailing separator from each entry (<code>-t</code>),</li>
<li>and stores the result in the named array (selected_device_names - the <code>$</code> symbol is implied).</li>
</ul>
<p>Note that mapfile requires the input to be in the same shell, therefore,<br>
<code>echo &quot;$selected_device_descriptions&quot; | mapfile ...</code><br>
wonâ€™t work, since <strong>the pipe operator (<code>|</code>) causes mapfile to run in a subshell</strong>.</p>
<p>A curiosity: mapfile is not an executable file - itâ€™s a built-in bash command, therefore, man mapfile wonâ€™t work; instead, check out the Bash manual (<code>man bash-builtins</code>).</p>
<h4 id="radio-list" tabindex="-1">Radio list <a class="header-anchor" href="#radio-list" aria-hidden="true">ðŸ”—</a></h4>
<p>A radio list is a dialog where the user can select one option from a list. The difference between a radio list and a menu is that the user selects an option (using the space bar in whiptail) and then confirms that choice by hitting OK.</p>
<pre><code class="language-bash">whiptail --title <span class="hljs-string">&quot;Radio list example&quot;</span> --radiolist \
<span class="hljs-string">&quot;Choose user&#x27;s permissions&quot;</span> 20 78 4 \
<span class="hljs-string">&quot;NET_OUTBOUND&quot;</span> <span class="hljs-string">&quot;Allow connections to other hosts&quot;</span> ON \
<span class="hljs-string">&quot;NET_INBOUND&quot;</span> <span class="hljs-string">&quot;Allow connections from other hosts&quot;</span> OFF \
<span class="hljs-string">&quot;LOCAL_MOUNT&quot;</span> <span class="hljs-string">&quot;Allow mounting of local devices&quot;</span> OFF \
<span class="hljs-string">&quot;REMOTE_MOUNT&quot;</span> <span class="hljs-string">&quot;Allow mounting of remote devices&quot;</span> OFF
</code></pre>
<p>Esempio di radio list:</p>
<pre><code class="language-bash"><span class="hljs-meta">#!/usr/bin/env bash</span>
<span class="hljs-built_in">declare</span> -A v_usb_storage_devices=([/dev/sdb]=<span class="hljs-string">&quot;My USB Key&quot;</span> [/dev/sdc]=<span class="hljs-string">&quot;My external HDD&quot;</span>)
entry_options=()
entries_count=<span class="hljs-variable">${#v_usb_storage_devices[@]}</span>
message=$<span class="hljs-string">&#x27;Choose an external device. THE DEVICE WILL BE COMPLETELY ERASED.\n\nAvailable (USB) devices:\n\n&#x27;</span>
<span class="hljs-keyword">for</span> dev <span class="hljs-keyword">in</span> <span class="hljs-string">&quot;<span class="hljs-variable">${!v_usb_storage_devices[@]}</span>&quot;</span>; <span class="hljs-keyword">do</span>
  entry_options+=(<span class="hljs-string">&quot;<span class="hljs-variable">$dev</span>&quot;</span>)
  entry_options+=(<span class="hljs-string">&quot;<span class="hljs-variable">${v_usb_storage_devices[$dev]}</span>&quot;</span>)
  entry_options+=(<span class="hljs-string">&quot;OFF&quot;</span>)
<span class="hljs-keyword">done</span>
v_sdcard_device=$(whiptail --radiolist --title <span class="hljs-string">&quot;Device choice&quot;</span> <span class="hljs-string">&quot;<span class="hljs-variable">$message</span>&quot;</span> 20 78 <span class="hljs-variable">$entries_count</span> -- <span class="hljs-string">&quot;<span class="hljs-variable">${entry_options[@]}</span>&quot;</span> 3&gt;&amp;1 1&gt;&amp;2 2&gt;&amp;3)
<span class="hljs-comment"># We use -- in case any of the entry_options started with -; if we donâ€™t do this, whiptail will think itâ€™s a commandline parameter.</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;<span class="hljs-variable">$v_sdcard_device</span>&quot;</span> <span class="hljs-comment"># let&#x27;s say the first was chosen</span>
</code></pre>
<h4 id="progress-gauge" tabindex="-1">Progress gauge <a class="header-anchor" href="#progress-gauge" aria-hidden="true">ðŸ”—</a></h4>
<p>Syntax: <code>whiptail --gauge &lt;text&gt; &lt;height&gt; &lt;width&gt; [&lt;percent&gt;]</code></p>
<p>Also reads percent from stdin:</p>
<pre><code class="language-bash"><span class="hljs-meta">#!/usr/bin/env bash</span>
{
    <span class="hljs-keyword">for</span> ((i = <span class="hljs-number">0</span> ; i &lt;= <span class="hljs-number">100</span> ; i+=<span class="hljs-number">5</span>)); <span class="hljs-keyword">do</span>
        <span class="hljs-built_in">sleep</span> 0.1
        <span class="hljs-built_in">echo</span> <span class="hljs-variable">$i</span>
    <span class="hljs-keyword">done</span>
} | whiptail --gauge <span class="hljs-string">&quot;Please wait while we are sleeping...&quot;</span> 6 50 0
</code></pre>
<pre><code class="language-bash"><span class="hljs-meta">#!/usr/bin/env bash</span>
(<span class="hljs-built_in">dd</span> status=progress <span class="hljs-keyword">if</span>=<span class="hljs-string">&quot;<span class="hljs-variable">$v_os_image_filename</span>&quot;</span> of=<span class="hljs-string">&quot;<span class="hljs-variable">$v_sdcard_device</span>&quot;</span>) 2&gt;&amp;1 | \
<span class="hljs-built_in">stdbuf</span> -o0 awk -v RS=<span class="hljs-string">&#x27;\r&#x27;</span> <span class="hljs-string">&quot;/copied/ { printf(\&quot;%0.f\n\&quot;, \$1 / <span class="hljs-variable">$os_image_size</span> * 100) }&quot;</span> | \
whiptail --title <span class="hljs-string">&quot;Image writing&quot;</span> --gauge <span class="hljs-string">&quot;Burning the image on the SD card...&quot;</span> 20 78 0
</code></pre>
<h2 id="zenity" tabindex="-1">zenity <a class="header-anchor" href="#zenity" aria-hidden="true">ðŸ”—</a></h2>
<p><a href="https://man.archlinux.org/man/zenity.1">https://man.archlinux.org/man/zenity.1</a></p>
<p>Zenity is a rewrite of gdialog, the GNOME port of dialog which allows you to display dialog boxes from the commandline and shell scripts.</p>
<ul>
<li><a href="https://help.gnome.org/users/zenity/">https://help.gnome.org/users/zenity/</a></li>
<li><a href="https://help.gnome.org/users/zenity/3.32/">https://help.gnome.org/users/zenity/3.32/</a></li>
</ul>
<p>permette di avere dei dialog di input negli script shell</p>
<pre><code class="language-bash"><span class="hljs-meta">#!/usr/bin/env bash</span>
<span class="hljs-comment"># Convert ISO-8859-1 to UTF-8</span>
<span class="hljs-keyword">if</span> [ <span class="hljs-variable">$#</span> -gt 0 ];<span class="hljs-keyword">then</span>
convmv -f iso-8859-1 -t utf-8 -r --notest <span class="hljs-string">&quot;<span class="hljs-variable">$@</span>&quot;</span>| zenity --progress --pulsate --text=<span class="hljs-string">&quot;conversion in progress&quot;</span> --auto-close
</code></pre>
<h2 id="pipe-viewer" tabindex="-1">Pipe Viewer <a class="header-anchor" href="#pipe-viewer" aria-hidden="true">ðŸ”—</a></h2>
<pre><code class="language-bash">$ pamac search <span class="hljs-string">&#x27;^pv$&#x27;</span>
pv  1.6.6-3  community 
    A terminal-based tool <span class="hljs-keyword">for</span> monitoring the progress of data through a pipeline.

$ <span class="hljs-built_in">sudo</span> pamac install pv
</code></pre>
<h1 id="a-spinner-in-bash" tabindex="-1">A spinner in Bash <a class="header-anchor" href="#a-spinner-in-bash" aria-hidden="true">ðŸ”—</a></h1>
<p><a href="https://stackoverflow.com/questions/238073/how-to-add-a-progress-bar-to-a-shell-script">https://stackoverflow.com/questions/238073/how-to-add-a-progress-bar-to-a-shell-script</a></p>
<pre><code class="language-bash">i=1
sp=<span class="hljs-string">&quot;/-\|&quot;</span>
<span class="hljs-built_in">echo</span> -n <span class="hljs-string">&#x27; &#x27;</span>
<span class="hljs-keyword">while</span> <span class="hljs-literal">true</span>
<span class="hljs-keyword">do</span>
    <span class="hljs-built_in">printf</span> <span class="hljs-string">&quot;\b<span class="hljs-variable">${sp:i++%<span class="hljs-variable">${#sp}</span>:1}</span>&quot;</span>
<span class="hljs-keyword">done</span>
</code></pre>
<pre><code class="language-bash">sp=<span class="hljs-string">&#x27;/-\|&#x27;</span>
<span class="hljs-built_in">printf</span> <span class="hljs-string">&#x27; &#x27;</span>
<span class="hljs-keyword">while</span> <span class="hljs-literal">true</span>; <span class="hljs-keyword">do</span>
    <span class="hljs-built_in">printf</span> <span class="hljs-string">&#x27;\b%.1s&#x27;</span> <span class="hljs-string">&quot;<span class="hljs-variable">$sp</span>&quot;</span>
    sp=<span class="hljs-variable">${sp#?}</span><span class="hljs-variable">${sp%???}</span>
<span class="hljs-keyword">done</span>
</code></pre>
<pre><code class="language-bash">sp=<span class="hljs-string">&quot;/-\|&quot;</span>
sc=0
<span class="hljs-function"><span class="hljs-title">spin</span></span>() {
   <span class="hljs-built_in">printf</span> <span class="hljs-string">&quot;\b<span class="hljs-variable">${sp:sc++:1}</span>&quot;</span>
   ((sc==<span class="hljs-variable">${#sp}</span>)) &amp;&amp; sc=0
}
<span class="hljs-function"><span class="hljs-title">endspin</span></span>() {
   <span class="hljs-built_in">printf</span> <span class="hljs-string">&quot;\r%s\n&quot;</span> <span class="hljs-string">&quot;<span class="hljs-variable">$@</span>&quot;</span>
}

<span class="hljs-keyword">until</span> work_done; <span class="hljs-keyword">do</span>
   spin
   some_work ...
<span class="hljs-keyword">done</span>
endspin
</code></pre>
</body></html>